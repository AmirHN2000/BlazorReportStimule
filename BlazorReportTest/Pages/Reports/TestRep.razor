@page "/TestRep"

@using Stimulsoft.Report
@using Stimulsoft.Report.Blazor
@using Stimulsoft.Report.Web
@using Stimulsoft.Base
@using BlazorReportTest.ViewModels
@using System.Data

<StiBlazorViewer Report="Report"></StiBlazorViewer>

@code {
    private StiReport Report { get; set; }

    protected override void OnInitialized()
    {
        //base.OnInitialized();

        StiLicense.LoadFromFile("wwwroot/BaseReports/license/license.key");
        //StiLicense.LoadFromString("6vJhGtLLLz2GNviWmUTrhSqnOItdDwjBylQzQcAOiHkcgIvwL0jnpsDqRpWg5FI5kt2G7A0tYIcUygBh1sPs7sUZct1/USoUgY9XBwlar38S6cneciUIxW2fNCDuEQxH+YsZ3av3XB9ANA1ky5svdTCkz8cpYIDcdGLGIWE76CjGIxA2sDA09veSwsJnNcow901SYAFjoDMinyUIHQRPcmVo9clh7Tl3T4yqZnTemwtQAssvvsnhBsvSmZhVGEw2d+b/835Q4ZgwOii29RvKn9CoIuI5mxETV3DcNugq5FDqOjYjuAMfTE4n26zhuaEaRrtxeYZk/Z854LcFoKkBTPkJb/o0glIJQKvN+YzaNMzRuTVGQvc1qJZZC7KonTEehGRUkT1dTqWVlKDkv1uxNZ+/WtH8hDZj40ioWqc2cp0yAGkI5ItFDZ0FlFfhqMOiE0Wk/EaVTjAeo9sdfmHxuzby0hU2qUSa77ItCAbjL5yudrcAzWUHlPLESyy2Sa/20KxzU7qeUemem6ersrSbGmTfmv1BSlFMn6fDQjD/2G97K3FZriV5BC0bM3awRA1Z");
        
        var data = new List<TestVm>()
        {
            new()
            {
                Id = 1,
                Name = "Amir",
                Mobile = "09131234567",
                Address = "kashan"
            },
            new()
            {
                Id = 2,
                Name = "Aali",
                Mobile = "09131234567",
                Address = "tehran"
            },
            new()
            {
                Id = 3,
                Name = "arash",
                Mobile = "09131234567",
                Address = "qom"
            },
            new()
            {
                Id = 4,
                Name = "hamid",
                Mobile = "09131234567",
                Address = "shiraz"
            }
        };
        
        Report = new StiReport();
        Report.Load("wwwroot/BaseReports/Report.mrt");

        Report.RegBusinessObject("DataTest", data);
        Report.Dictionary.Synchronize();
    }
    

}